(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[405],{9536:function(e,n,t){(window.__NEXT_P=window.__NEXT_P||[]).push(["/",function(){return t(6424)}])},6424:function(e,n,t){"use strict";t.r(n);var r=t(4246),s=t(7378),o=t(5528),a=t(2425),i=t(2609),l=t(2878);let h={newShareClass:"",preMoneyValuation:3e7,newMoneyRaised:1e6,noteConversion:!1,notesConvertToNewClass:!1,expandOptionPool:!1,postMoneyOptionPoolSize:.2,notesFields:[],foundersNumberOfShares:8e6,commonNumberOfShares:1e6,warrantsNumberOfShares:1e5,grantedOptionsNumberOfShares:8e5,oldOptionsNumberOfShares:1e5},c={principalInvested:5e5,conversionDiscount:.2,conversionDate:void 0,interestRate:void 0,interestStartDate:void 0,conversionCap:5e6};n.default=()=>{let[e,n]=(0,s.useState)(h),[t,u]=(0,s.useState)(c),[d,p]=(0,s.useState)(null),S=e=>e instanceof Date?new Date(e.getTime()-6e4*e.getTimezoneOffset()).toISOString().split("T")[0]:e||"",y=(e,n,t)=>{switch(n){case"checkbox":return!!t;case"number":return""===e?void 0:parseFloat(e);case"date":if(""===e)return;{let n=new Date(e);return n.setHours(24),n}default:return e}},m=e=>{let{name:t,value:r,type:s,checked:o}=e.target,a=y(r,s,o);n(e=>({...e,[t]:a}))},f=e=>{let{name:n,value:t,type:r,checked:s}=e.target,o=y(t,r,s);u(e=>({...e,[n]:o}))},C=e=>{n(n=>{let t=n.notesFields.filter((n,t)=>t!==e);return{...n,notesFields:t}})},M=n=>{n.preventDefault();let t=new o.CapTable(e);console.log(JSON.stringify(e)),console.log({organization:e,shareClasses:t.shareClasses(),preMoneySharePrice:t.preMoneySharePrice(),spff:t.sharePriceForFinancing()}),p(t)};return(0,r.jsxs)("div",{children:[(0,r.jsx)(i.YE,{"aria-label":"Organization",children:(0,r.jsxs)("form",{onSubmit:M,className:"",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("div",{children:"Organization"}),(0,r.jsx)(i.__,{htmlFor:"newShareClass",children:" New Share Class:"}),(0,r.jsx)(i.oi,{name:"newShareClass",value:e.newShareClass,onChange:m}),(0,r.jsx)(i.__,{children:"Pre-Money Valuation:"}),(0,r.jsx)(i.oi,{type:"number",name:"preMoneyValuation",value:e.preMoneyValuation,onChange:m}),(0,r.jsx)(i.__,{children:"New Money Raised:"}),(0,r.jsx)(i.oi,{type:"number",name:"newMoneyRaised",value:e.newMoneyRaised,onChange:m}),(0,r.jsx)(i.__,{children:"Post-Money Option Pool Size:"}),(0,r.jsx)(i.oi,{type:"number",name:"postMoneyOptionPoolSize",value:e.postMoneyOptionPoolSize,onChange:m}),(0,r.jsx)(i.__,{children:"Founders Number of Shares:"}),(0,r.jsx)(i.oi,{type:"number",name:"foundersNumberOfShares",value:e.foundersNumberOfShares,onChange:m}),(0,r.jsx)(i.__,{children:"Common Number of Shares:"}),(0,r.jsx)(i.oi,{type:"number",name:"commonNumberOfShares",value:e.commonNumberOfShares,onChange:m}),(0,r.jsx)(i.__,{children:"Warrants Number of Shares:"}),(0,r.jsx)(i.oi,{type:"number",name:"warrantsNumberOfShares",value:e.warrantsNumberOfShares,onChange:m}),(0,r.jsx)(i.__,{children:"Granted Options Number of Shares:"}),(0,r.jsx)(i.oi,{type:"number",name:"grantedOptionsNumberOfShares",value:e.grantedOptionsNumberOfShares,onChange:m}),(0,r.jsx)(i.__,{children:"Old Options Number of Shares:"}),(0,r.jsx)(i.oi,{type:"number",name:"oldOptionsNumberOfShares",value:e.oldOptionsNumberOfShares,onChange:m}),(0,r.jsx)(i.__,{children:"Note Conversion:"}),(0,r.jsx)(i.XZ,{name:"noteConversion",checked:e.noteConversion,onChange:m}),(0,r.jsx)(i.__,{children:"Notes Convert to New Class:"}),(0,r.jsx)(i.XZ,{name:"notesConvertToNewClass",checked:e.notesConvertToNewClass,onChange:m}),(0,r.jsx)(i.__,{children:"Expand Option Pool:"}),(0,r.jsx)(i.XZ,{name:"expandOptionPool",checked:e.expandOptionPool,onChange:m})]}),(0,r.jsx)("div",{children:"Convertible Notes"}),e.notesFields.map((e,n)=>(0,r.jsxs)("div",{children:[(0,r.jsxs)(i.iA.HeadCell,{colSpan:2,children:["Note ",n+1]}),(0,r.jsx)(i.__,{children:"Principal Invested:"}),(0,r.jsx)(i.oi,{type:"number",name:"notesFields[".concat(n,"].principalInvested"),value:e.principalInvested,onChange:f}),(0,r.jsx)(i.__,{children:"Conversion Discount:"}),(0,r.jsx)(i.oi,{type:"number",name:"notesFields[".concat(n,"].conversionDiscount"),value:e.conversionDiscount,onChange:f}),(0,r.jsx)(i.__,{children:"Converstion Cap:"}),(0,r.jsx)(i.oi,{type:"number",name:"notesFields[".concat(n,"].conversionCap"),value:e.conversionCap,onChange:f}),(0,r.jsx)(i.__,{children:"Conversion Date:"}),(0,r.jsx)(i.oi,{type:"date",name:"notesFields[".concat(n,"].conversionDate"),value:S(e.conversionDate),onChange:f}),(0,r.jsx)(i.__,{children:"Interest Rate:"}),(0,r.jsx)(i.oi,{type:"number",name:"notesFields[".concat(n,"].interestRate"),value:e.interestRate,onChange:f}),(0,r.jsx)(i.__,{children:"Interest Start Date:"}),(0,r.jsx)(i.oi,{type:"date",name:"notesFields[".concat(n,"].interestStartDate"),value:S(e.interestStartDate),onChange:f}),(0,r.jsx)(i.zx,{onClick:()=>C(n),children:(0,r.jsx)(l.EF5,{className:"mr-2 h-5 w-5"})})]},n)),(0,r.jsx)("div",{children:"New Note"}),(0,r.jsx)(i.__,{children:"Principal Invested:"}),(0,r.jsx)(i.oi,{type:"number",name:"principalInvested",value:t.principalInvested,onChange:f}),(0,r.jsx)(i.__,{children:"Conversion Discount:"}),(0,r.jsx)(i.oi,{type:"number",name:"conversionDiscount",value:t.conversionDiscount,onChange:f}),(0,r.jsx)(i.__,{children:"Conversion Cap:"}),(0,r.jsx)(i.oi,{type:"number",name:"conversionCap",value:t.conversionCap,onChange:f}),(0,r.jsx)(i.__,{children:"Conversion Date:"}),(0,r.jsx)(i.oi,{type:"date",name:"conversionDate",value:S(t.conversionDate),onChange:f}),(0,r.jsx)(i.__,{children:"Interest Rate:"}),(0,r.jsx)(i.oi,{type:"number",name:"interestRate",value:t.interestRate,onChange:f}),(0,r.jsx)(i.__,{children:"Interest Start Date:"}),(0,r.jsx)(i.oi,{type:"date",name:"interestStartDate",value:S(t.interestStartDate),onChange:f}),(0,r.jsxs)(i.zx,{onClick:()=>{n(e=>({...e,notesFields:[...e.notesFields,t]})),u(c)},children:[(0,r.jsx)(l.gIP,{className:"mr-2 h-5 w-5"}),"Add"]}),(0,r.jsxs)(i.zx,{onClick:M,children:[(0,r.jsx)(l.XwR,{className:"mr-2 h-5 w-5"}),"Generate Cap Table"]})]})}),d&&(0,r.jsxs)("div",{className:"p-4 sm:ml-64",children:[(0,r.jsx)("h1",{className:"text-3xl font-bold underline",children:"Pro Forma Cap Table"}),(0,r.jsxs)("dl",{children:[(0,r.jsx)("dt",{children:"Pre-Money Share Price"}),(0,r.jsxs)("dd",{children:["$",d.preMoneySharePrice()]}),(0,r.jsx)("dt",{children:"Share Price for Financing"}),(0,r.jsxs)("dd",{children:["$",d.sharePriceForFinancing()]})]}),(0,r.jsxs)(i.iA,{children:[(0,r.jsxs)("thead",{children:[(0,r.jsxs)(i.iA.Row,{children:[(0,r.jsx)(i.iA.HeadCell,{}),(0,r.jsx)(i.iA.HeadCell,{colSpan:3,style:{borderRight:"1px solid black"},children:"Pre-Money"}),(0,r.jsx)(i.iA.HeadCell,{colSpan:6,children:"Post-Money"})]}),(0,r.jsxs)(i.iA.Row,{children:[(0,r.jsx)(i.iA.HeadCell,{}),(0,r.jsx)(i.iA.HeadCell,{children:"Shares"}),(0,r.jsx)(i.iA.HeadCell,{children:"Ownership"}),(0,r.jsx)(i.iA.HeadCell,{style:{borderRight:"1px solid black"},children:"Ownership Value"}),(0,r.jsx)(i.iA.HeadCell,{children:"Shares"}),(0,r.jsx)(i.iA.HeadCell,{children:"Ownership"}),(0,r.jsx)(i.iA.HeadCell,{children:"% Change"}),(0,r.jsx)(i.iA.HeadCell,{children:"Ownership Value"}),(0,r.jsx)(i.iA.HeadCell,{children:"Value Change"}),(0,r.jsx)(i.iA.HeadCell,{children:"Dilution"})]})]}),(0,r.jsx)(i.iA.Body,{children:d.shareClasses().map((e,n)=>(0,r.jsxs)(i.iA.Row,{children:[(0,r.jsx)(i.iA.Cell,{children:e.name}),(0,r.jsx)(i.iA.Cell,{children:(0,a.asShares)(e.preMoneyShares)}),(0,r.jsxs)(i.iA.Cell,{children:[(0,a.asPercent)(e.preMoneyPercentOwnership(d.totalPreMoneyShares())),"%"]}),(0,r.jsxs)(i.iA.Cell,{children:["$",(0,a.asUSD)(e.preMoneyOwnershipValue(d.preMoneySharePrice()))]}),(0,r.jsx)(i.iA.Cell,{children:(0,a.asShares)(e.postMoneyShares)}),(0,r.jsxs)(i.iA.Cell,{children:[(0,a.asPercent)(e.postMoneyPercentOwnership(d.totalPostMoneyShares())),"%"]}),(0,r.jsxs)(i.iA.Cell,{children:[(0,a.asPercent)(e.postMoneyPercentChange(d.totalPostMoneyShares(),d.totalPreMoneyShares())),"%"]}),(0,r.jsxs)(i.iA.Cell,{children:["$",(0,a.asUSD)(e.postMoneyOwnershipValue(d.sharePriceForFinancing()))]}),(0,r.jsxs)(i.iA.Cell,{children:["$",(0,a.asUSD)(e.postMoneyValueChange(d.sharePriceForFinancing(),d.preMoneySharePrice()))]}),(0,r.jsxs)(i.iA.Cell,{children:[(0,a.asPercent)(e.postMoneyDilution(d.totalPostMoneyShares(),d.totalPreMoneyShares())),"%"]})]}))}),(0,r.jsx)("tfoot",{children:(0,r.jsxs)(i.iA.Row,{children:[(0,r.jsx)(i.iA.Cell,{}),(0,r.jsx)(i.iA.Cell,{children:(0,a.asShares)(d.totalPreMoneyShares())}),(0,r.jsx)(i.iA.Cell,{}),(0,r.jsxs)(i.iA.Cell,{children:["$",(0,a.asUSD)(d.totalPreMoneyOwnershipValue())]}),(0,r.jsx)(i.iA.Cell,{children:(0,a.asShares)(d.totalPostMoneyShares())}),(0,r.jsxs)(i.iA.Cell,{children:[(0,a.asPercent)(d.totalPostMoneyPercentOwnership()),"%"]}),(0,r.jsx)(i.iA.Cell,{}),(0,r.jsxs)(i.iA.Cell,{children:["$",(0,a.asUSD)(d.totalPostMoneyOwnershipValue())]}),(0,r.jsxs)(i.iA.Cell,{children:["$",(0,a.asUSD)(d.totalPostMoneyValueChange())]}),(0,r.jsx)(i.iA.Cell,{})]})})]})]})]})}},5090:function(e,n,t){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0});let s=t(2425),o=t(1082),a=r(t(7194));class i{organization;notes;spff;constructor(e){this.organization=e,this.notes=e.notesFields.map(e=>o.AbstractNoteFactory.create(e))}static calcSharePriceForFinancing(e,n,t,r,o,a){let i=t/e,l=(0,s.iterate)(s=>{let i=a.reduce((n,t)=>n+t.shares(s,e),0),l=o*n/s,h=e+(l-r)+i;return t/h},i,1e3,5);return(0,s.roundTo)(l,5)}shareClasses(){return[new a.default({name:"Founders' Shares",preMoneyShares:this.organization.foundersNumberOfShares,postMoneyShares:this.organization.foundersNumberOfShares}),new a.default({name:"Rest of Common",preMoneyShares:this.organization.commonNumberOfShares,postMoneyShares:this.organization.commonNumberOfShares}),new a.default({name:"Warrants",preMoneyShares:this.organization.warrantsNumberOfShares,postMoneyShares:this.organization.warrantsNumberOfShares}),new a.default({name:"Convertible Notes Into New Share Class",preMoneyShares:0,postMoneyShares:this.notesShareClassPostMoneyShares()}),new a.default({name:"New Money Equity",preMoneyShares:0,postMoneyShares:this.newMoneyShareClassPostMoneyShares()}),new a.default({name:"Granted Options",preMoneyShares:this.organization.grantedOptionsNumberOfShares,postMoneyShares:this.organization.grantedOptionsNumberOfShares}),new a.default({name:"Options Available Before",preMoneyShares:this.organization.oldOptionsNumberOfShares,postMoneyShares:this.organization.oldOptionsNumberOfShares}),new a.default({name:"New Options for Pool",preMoneyShares:0,postMoneyShares:this.newOptionsShareClassShares()})]}totalPreMoneyShares(){return[this.organization.foundersNumberOfShares,this.organization.commonNumberOfShares,this.organization.warrantsNumberOfShares,this.organization.grantedOptionsNumberOfShares,this.organization.oldOptionsNumberOfShares].reduce((e,n)=>e+n,0)}totalPostMoneyShares(){return[this.totalPreMoneyShares(),this.newOptionsShareClassShares(),this.notesShareClassPostMoneyShares(),this.newMoneyShareClassPostMoneyShares()].reduce((e,n)=>e+n,0)}totalPreMoneyOwnershipValue(){return this.organization.preMoneyValuation}totalPostMoneyOwnershipValue(){return this.organization.preMoneyValuation+this.organization.newMoneyRaised}totalPostMoneyPercentOwnership(){return this.shareClasses().reduce((e,n)=>e+n.postMoneyPercentOwnership(this.totalPostMoneyShares()),0)}totalPostMoneyValueChange(){return this.shareClasses().reduce((e,n)=>e+n.postMoneyValueChange(this.sharePriceForFinancing(),this.preMoneySharePrice()),0)}totalPostMoneyDilution(){return this.shareClasses().reduce((e,n)=>e+n.postMoneyDilution(this.totalPostMoneyShares(),this.totalPreMoneyShares()),0)}preMoneySharePrice(){return(0,s.roundTo)(this.totalPreMoneyOwnershipValue()/this.totalPreMoneyShares(),5)}sharePriceForFinancing(){return void 0===this.spff&&(this.spff=i.calcSharePriceForFinancing(this.totalPreMoneyShares(),this.totalPostMoneyOwnershipValue(),this.organization.preMoneyValuation,this.organization.oldOptionsNumberOfShares,this.organization.postMoneyOptionPoolSize,this.notes)),this.spff}newOptionsShareClassShares(){return(0,s.asShares)(this.organization.postMoneyOptionPoolSize*this.totalPostMoneyOwnershipValue()/this.sharePriceForFinancing()-this.organization.oldOptionsNumberOfShares)}notesShareClassPostMoneyShares(){return this.notes.reduce((e,n)=>e+n.shares(this.sharePriceForFinancing(),this.totalPreMoneyShares()),0)}newMoneyShareClassPostMoneyShares(){return(0,s.asShares)(this.organization.newMoneyRaised/this.sharePriceForFinancing())}}n.default=i},1082:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.AbstractNoteFactory=void 0;let r=t(2425);n.AbstractNoteFactory=class{static create(e){return void 0===e.conversionCap?new s(e):new o(e)}};class s{principalInvested;conversionDiscount;conversionDate=new Date;interestRate=0;interestStartDate=new Date;name="";constructor(e){this.principalInvested=e.principalInvested,this.conversionDiscount=e.conversionDiscount,void 0!==e.conversionDate&&(this.conversionDate=e.conversionDate),void 0!==e.interestRate&&(this.interestRate=e.interestRate),void 0!==e.interestStartDate&&(this.interestStartDate=e.interestStartDate),void 0!==e.name&&(this.name=e.name)}conversionAmount(){return this.principalInvested+this.interestAccrued()}value(e,n){return(0,r.asUSD)(this.conversionAmount()/(1-this.conversionDiscount))}shares(e,n){return(0,r.asShares)(this.conversionAmount()/this.price(e))}price(e){return(0,r.asUSD)(e*(1-this.conversionDiscount))}interestAccrued(){if(this.interestRate&&this.interestRate>0){let e=this.conversionDate.getTime()-this.interestStartDate.getTime(),n=(0,r.roundTo)(Math.round(e/864e5)/365,2);return(0,r.simpleInterest)(this.principalInvested,this.interestRate,n)}return 0}}class o extends s{conversionCap=0;constructor(e){super(e),void 0!==e.conversionCap&&(this.conversionCap=e.conversionCap)}value(e,n){return Math.max(this.discountValue(e,n),this.capValue(e,n))}shares(e,n){return Math.max(this.discountShares(e,n),this.capShares(e,n))}price(e){return Math.min(this.discountPrice(e),this.capPrice(e))}capValue(e,n){let t=e/this.capPrice(n);return(0,r.asUSD)(this.conversionAmount()*t)}capShares(e,n){return(0,r.asShares)(this.conversionAmount()/this.capPrice(n))}capPrice(e){return(0,r.asUSD)(this.conversionCap/e)}discountValue(e,n){return super.value(e,n)}discountShares(e,n){return super.shares(e,n)}discountPrice(e){return super.price(e)}}},7194:function(e,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=class{name;preMoneyShares;postMoneyShares;constructor(e){this.name=e.name,this.preMoneyShares=e.preMoneyShares,this.postMoneyShares=e.postMoneyShares}preMoneyPercentOwnership(e){return this.preMoneyShares/e}preMoneyOwnershipValue(e){return e*this.preMoneyShares}postMoneyPercentOwnership(e){return this.postMoneyShares/e}postMoneyOwnershipValue(e){return e*this.postMoneyShares}postMoneyPercentChange(e,n){return this.postMoneyPercentOwnership(e)-this.preMoneyPercentOwnership(n)}postMoneyValueChange(e,n){return this.postMoneyOwnershipValue(e)-this.preMoneyOwnershipValue(n)}postMoneyDilution(e,n){return this.postMoneyPercentChange(e,n)/this.preMoneyPercentOwnership(n)}}},5528:function(e,n,t){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.ShareClass=n.CapTable=void 0;let s=r(t(7194));n.ShareClass=s.default;let o=r(t(5090));n.CapTable=o.default},2425:function(e,n,t){"use strict";var r=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(n,"__esModule",{value:!0}),n.simpleInterest=n.prettyShares=n.prettyUSD=n.prettyPercent=n.asPercent=n.asUSD=n.asShares=n.roundTo=n.iterate=void 0;let s=r(t(242));n.iterate=s.default;let o=t(7307);Object.defineProperty(n,"roundTo",{enumerable:!0,get:function(){return o.roundTo}}),Object.defineProperty(n,"asShares",{enumerable:!0,get:function(){return o.asShares}}),Object.defineProperty(n,"asUSD",{enumerable:!0,get:function(){return o.asUSD}}),Object.defineProperty(n,"asPercent",{enumerable:!0,get:function(){return o.asPercent}}),Object.defineProperty(n,"prettyPercent",{enumerable:!0,get:function(){return o.prettyPercent}}),Object.defineProperty(n,"prettyUSD",{enumerable:!0,get:function(){return o.prettyUSD}}),Object.defineProperty(n,"prettyShares",{enumerable:!0,get:function(){return o.prettyShares}});let a=t(5968);Object.defineProperty(n,"simpleInterest",{enumerable:!0,get:function(){return a.simpleInterest}})},5968:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.simpleInterest=void 0;let r=t(7307);n.simpleInterest=function(e,n,t){return(0,r.roundTo)(n*e*t,2)}},242:function(e,n,t){"use strict";Object.defineProperty(n,"__esModule",{value:!0});let r=t(7307);n.default=function(e,n=0,t=1e3,s=3){let o;for(let a=0;a<t;a++){if((o=(0,r.roundTo)(e(n),s))===n)return o;n=o}throw Error(`Unable to find solution in ${t} iterations.`)}},7307:function(e,n){"use strict";function t(e,n){if(0===n)return Math.round(e);let t=Math.pow(10,n);return Math.round((e+Number.EPSILON)*t)/t}function r(e){return t(e,0)}Object.defineProperty(n,"__esModule",{value:!0}),n.prettyShares=n.prettyPercent=n.prettyUSD=n.asPercent=n.asUSD=n.asShares=n.roundTo=void 0,n.roundTo=t,n.asUSD=function(e){return t(e,2)},n.asShares=r,n.asPercent=function(e){return t(100*e,1)},n.prettyUSD=function(e,n=0){let r=new Intl.NumberFormat("en-US",{style:"currency",currency:"USD",maximumFractionDigits:n});return r.format(t(e,n))},n.prettyPercent=function(e,n=1){return`${t(100*e,n).toLocaleString("en-US")}%`},n.prettyShares=function(e){return r(e).toLocaleString("en-US")}}},function(e){e.O(0,[492,601,609,774,888,179],function(){return e(e.s=9536)}),_N_E=e.O()}]);